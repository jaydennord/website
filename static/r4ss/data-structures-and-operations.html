<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>R for Simulation Studies</title>
  <meta name="description" content="R for Simulation Studies">
  <meta name="generator" content="bookdown 0.7 and GitBook 2.6.7">

  <meta property="og:title" content="R for Simulation Studies" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="R for Simulation Studies" />
  
  
  

<meta name="author" content="Jayden Nord">



  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="r-essentials-intro.html">
<link rel="next" href="indexing.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="1" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="intro.html"><a href="intro.html#statistics-review"><i class="fa fa-check"></i><b>1.1</b> Statistics review</a></li>
<li class="chapter" data-level="1.2" data-path="intro.html"><a href="intro.html#simulation-studies"><i class="fa fa-check"></i><b>1.2</b> Simulation studies</a></li>
<li class="chapter" data-level="1.3" data-path="intro.html"><a href="intro.html#r"><i class="fa fa-check"></i><b>1.3</b> R</a></li>
</ul></li>
<li class="part"><span><b>I R essentials</b></span></li>
<li class="chapter" data-level="2" data-path="r-essentials-intro.html"><a href="r-essentials-intro.html"><i class="fa fa-check"></i><b>2</b> Introduction</a><ul>
<li class="chapter" data-level="2.1" data-path="r-essentials-intro.html"><a href="r-essentials-intro.html#readings"><i class="fa fa-check"></i><b>2.1</b> Readings</a></li>
<li class="chapter" data-level="2.2" data-path="r-essentials-intro.html"><a href="r-essentials-intro.html#focus"><i class="fa fa-check"></i><b>2.2</b> Focus</a></li>
<li class="chapter" data-level="2.3" data-path="r-essentials-intro.html"><a href="r-essentials-intro.html#exercises"><i class="fa fa-check"></i><b>2.3</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="data-structures-and-operations.html"><a href="data-structures-and-operations.html"><i class="fa fa-check"></i><b>3</b> Data structures and operations</a><ul>
<li class="chapter" data-level="3.1" data-path="data-structures-and-operations.html"><a href="data-structures-and-operations.html#readings-1"><i class="fa fa-check"></i><b>3.1</b> Readings</a></li>
<li class="chapter" data-level="3.2" data-path="data-structures-and-operations.html"><a href="data-structures-and-operations.html#focus-1"><i class="fa fa-check"></i><b>3.2</b> Focus</a></li>
<li class="chapter" data-level="3.3" data-path="data-structures-and-operations.html"><a href="data-structures-and-operations.html#matrices"><i class="fa fa-check"></i><b>3.3</b> Matrices</a><ul>
<li class="chapter" data-level="3.3.1" data-path="data-structures-and-operations.html"><a href="data-structures-and-operations.html#matrix-creation"><i class="fa fa-check"></i><b>3.3.1</b> Matrix creation</a></li>
<li class="chapter" data-level="3.3.2" data-path="data-structures-and-operations.html"><a href="data-structures-and-operations.html#dimensions-and-length-incomplete"><i class="fa fa-check"></i><b>3.3.2</b> Dimensions and length [INCOMPLETE]</a></li>
<li class="chapter" data-level="3.3.3" data-path="data-structures-and-operations.html"><a href="data-structures-and-operations.html#dimnames-and-names-incomplete"><i class="fa fa-check"></i><b>3.3.3</b> Dimnames and names [INCOMPLETE]</a></li>
<li class="chapter" data-level="3.3.4" data-path="data-structures-and-operations.html"><a href="data-structures-and-operations.html#matrix-binding"><i class="fa fa-check"></i><b>3.3.4</b> Matrix binding</a></li>
<li class="chapter" data-level="3.3.5" data-path="data-structures-and-operations.html"><a href="data-structures-and-operations.html#matrix-coercion"><i class="fa fa-check"></i><b>3.3.5</b> Matrix coercion</a></li>
<li class="chapter" data-level="3.3.6" data-path="data-structures-and-operations.html"><a href="data-structures-and-operations.html#matrix-operations"><i class="fa fa-check"></i><b>3.3.6</b> Matrix operations</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="data-structures-and-operations.html"><a href="data-structures-and-operations.html#exercises-1"><i class="fa fa-check"></i><b>3.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="indexing.html"><a href="indexing.html"><i class="fa fa-check"></i><b>4</b> Indexing</a><ul>
<li class="chapter" data-level="4.1" data-path="indexing.html"><a href="indexing.html#readings-2"><i class="fa fa-check"></i><b>4.1</b> Readings</a></li>
<li class="chapter" data-level="4.2" data-path="indexing.html"><a href="indexing.html#focus-2"><i class="fa fa-check"></i><b>4.2</b> Focus</a></li>
<li class="chapter" data-level="4.3" data-path="indexing.html"><a href="indexing.html#exercises-2"><i class="fa fa-check"></i><b>4.3</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="control-structures.html"><a href="control-structures.html"><i class="fa fa-check"></i><b>5</b> Control structures</a><ul>
<li class="chapter" data-level="5.1" data-path="control-structures.html"><a href="control-structures.html#readings-3"><i class="fa fa-check"></i><b>5.1</b> Readings</a></li>
<li class="chapter" data-level="5.2" data-path="control-structures.html"><a href="control-structures.html#focus-3"><i class="fa fa-check"></i><b>5.2</b> Focus</a></li>
<li class="chapter" data-level="5.3" data-path="control-structures.html"><a href="control-structures.html#ifelse-part-1"><i class="fa fa-check"></i><b>5.3</b> <code>ifelse()</code> part 1</a></li>
<li class="chapter" data-level="5.4" data-path="control-structures.html"><a href="control-structures.html#exercises-3"><i class="fa fa-check"></i><b>5.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="functions.html"><a href="functions.html"><i class="fa fa-check"></i><b>6</b> Functions</a><ul>
<li class="chapter" data-level="6.1" data-path="functions.html"><a href="functions.html#readings-4"><i class="fa fa-check"></i><b>6.1</b> Readings</a></li>
<li class="chapter" data-level="6.2" data-path="functions.html"><a href="functions.html#focus-4"><i class="fa fa-check"></i><b>6.2</b> Focus</a></li>
<li class="chapter" data-level="6.3" data-path="functions.html"><a href="functions.html#ifelse-part-2"><i class="fa fa-check"></i><b>6.3</b> <code>ifelse()</code> part 2</a></li>
<li class="chapter" data-level="6.4" data-path="functions.html"><a href="functions.html#exercises-4"><i class="fa fa-check"></i><b>6.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="functionals.html"><a href="functionals.html"><i class="fa fa-check"></i><b>7</b> Functionals</a><ul>
<li class="chapter" data-level="7.1" data-path="functionals.html"><a href="functionals.html#readings-5"><i class="fa fa-check"></i><b>7.1</b> Readings</a></li>
<li class="chapter" data-level="7.2" data-path="functionals.html"><a href="functionals.html#focus-5"><i class="fa fa-check"></i><b>7.2</b> Focus</a></li>
<li class="chapter" data-level="7.3" data-path="functionals.html"><a href="functionals.html#exercises-5"><i class="fa fa-check"></i><b>7.3</b> Exercises</a></li>
</ul></li>
<li class="part"><span><b>II Data generation</b></span></li>
<li class="chapter" data-level="8" data-path="random.html"><a href="random.html"><i class="fa fa-check"></i><b>8</b> Random sampling and variate generation</a><ul>
<li class="chapter" data-level="8.1" data-path="random.html"><a href="random.html#pseudo-randomness"><i class="fa fa-check"></i><b>8.1</b> Pseudo-randomness</a></li>
<li class="chapter" data-level="8.2" data-path="random.html"><a href="random.html#univariate-random-samples-incomplete"><i class="fa fa-check"></i><b>8.2</b> Univariate random samples [INCOMPLETE]</a></li>
<li class="chapter" data-level="8.3" data-path="random.html"><a href="random.html#multivariate-normal-samples-incomplete"><i class="fa fa-check"></i><b>8.3</b> Multivariate normal samples [INCOMPLETE]</a></li>
<li class="chapter" data-level="8.4" data-path="random.html"><a href="random.html#exercises-6"><i class="fa fa-check"></i><b>8.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="gen-from-lm.html"><a href="gen-from-lm.html"><i class="fa fa-check"></i><b>9</b> Generation from linear models</a><ul>
<li class="chapter" data-level="9.1" data-path="gen-from-lm.html"><a href="gen-from-lm.html#linear-combination-review"><i class="fa fa-check"></i><b>9.1</b> Linear combination review</a></li>
<li class="chapter" data-level="9.2" data-path="gen-from-lm.html"><a href="gen-from-lm.html#exogeneity-and-endogeneity"><i class="fa fa-check"></i><b>9.2</b> Exogeneity and endogeneity</a></li>
<li class="chapter" data-level="9.3" data-path="gen-from-lm.html"><a href="gen-from-lm.html#general-procedure"><i class="fa fa-check"></i><b>9.3</b> General procedure</a></li>
<li class="chapter" data-level="9.4" data-path="gen-from-lm.html"><a href="gen-from-lm.html#examples"><i class="fa fa-check"></i><b>9.4</b> Examples</a><ul>
<li class="chapter" data-level="9.4.1" data-path="gen-from-lm.html"><a href="gen-from-lm.html#crt"><i class="fa fa-check"></i><b>9.4.1</b> CRT</a></li>
<li class="chapter" data-level="9.4.2" data-path="gen-from-lm.html"><a href="gen-from-lm.html#correlated-outcomes"><i class="fa fa-check"></i><b>9.4.2</b> Correlated outcomes</a></li>
<li class="chapter" data-level="9.4.3" data-path="gen-from-lm.html"><a href="gen-from-lm.html#mediation"><i class="fa fa-check"></i><b>9.4.3</b> Mediation</a></li>
<li class="chapter" data-level="9.4.4" data-path="gen-from-lm.html"><a href="gen-from-lm.html#multilevel"><i class="fa fa-check"></i><b>9.4.4</b> Multilevel</a></li>
<li class="chapter" data-level="9.4.5" data-path="gen-from-lm.html"><a href="gen-from-lm.html#sem"><i class="fa fa-check"></i><b>9.4.5</b> SEM</a></li>
</ul></li>
<li class="chapter" data-level="9.5" data-path="gen-from-lm.html"><a href="gen-from-lm.html#exercises-7"><i class="fa fa-check"></i><b>9.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="gen-mult.html"><a href="gen-mult.html"><i class="fa fa-check"></i><b>10</b> Multiple replications and conditions</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R for Simulation Studies</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data-structures-and-operations" class="section level1">
<h1><span class="header-section-number">3</span> Data structures and operations</h1>
<div id="readings-1" class="section level2">
<h2><span class="header-section-number">3.1</span> Readings</h2>
<ul>
<li><a href="https://cran.r-project.org/doc/manuals/r-release/R-intro.html#Simple-manipulations-numbers-and-vectors">intro-r - 2 - Simple manipulations; numbers and vectors</a>
<ul>
<li>skip 2.7</li>
</ul></li>
<li><a href="https://cran.r-project.org/doc/manuals/r-release/R-intro.html#Objects">intro-r - 3 - Objects, their modes and attributes</a></li>
<li><a href="https://adv-r.hadley.nz/vectors-chap.html">adv-r - 4 - Vectors</a></li>
<li><a href="data-structures-and-operations.html#matrices">here - Matrices</a></li>
<li><a href="http://r4ds.had.co.nz/vectors.html">r4ds - 20 - Vectors</a>
<ul>
<li>skip 20.4.5, 20.7.2</li>
<li>20.7.3 not required</li>
</ul></li>
</ul>
</div>
<div id="focus-1" class="section level2">
<h2><span class="header-section-number">3.2</span> Focus</h2>
<ul>
<li>Vectors
<ul>
<li>definition of a vector</li>
<li>difference between atomic and recursive vectors (i.e. lists)</li>
<li>the three common types of atomic vectors (logical, numeric, character)</li>
<li>creating vectors using <code>c()</code>, <code>rep()</code>, <code>seq()</code>, and friends</li>
<li>definition of a factor</li>
<li>math and logic vectorized operations; understand recycling</li>
<li>math and logic summary operations</li>
<li><code>paste()</code> and <code>paste0()</code></li>
<li>implicit and explicit coercion</li>
</ul></li>
<li>Matrices
<ul>
<li>definition of a matrix</li>
<li>difference between vectors and matrices</li>
<li>creating matrices efficiently</li>
<li>fundamental matrix math and algebra functions; understand recycling</li>
<li>binding and concatenation</li>
<li>results of <code>length()</code>, <code>nrow()</code>, and <code>ncol()</code> and why</li>
</ul></li>
<li>Data frames
<ul>
<li>relationship between a data.frame and a…
<ul>
<li>list</li>
<li>matrix</li>
</ul></li>
<li>creating data frames from scratch or by coercion</li>
<li>binding and concatenation</li>
<li>preventing coercion of components to factor and why we would want to prevent such a coercion</li>
<li>results of <code>length()</code>, <code>nrow()</code>, and <code>ncol()</code> and why</li>
</ul></li>
<li>All
<ul>
<li>attributes, primarily names; getting and setting names of elements/components/dimensions</li>
<li>missing values; the default type of <code>NA</code></li>
</ul></li>
</ul>
</div>
<div id="matrices" class="section level2">
<h2><span class="header-section-number">3.3</span> Matrices</h2>
<p><em>Arrays</em> are data structures with two or more dimensions; two or more index values are required to identify a specific element. A <em>matrix</em> is an array with only two dimensions. In R, an array is technically a vector with additional dimension attributes.</p>
<div id="matrix-creation" class="section level3">
<h3><span class="header-section-number">3.3.1</span> Matrix creation</h3>
<p>There are many ways to create matrices and arrays (see <a href="http://adv-r.had.co.nz/Data-structures.html#matrices-and-arrays">here</a>), but we will focus on the <code>matrix</code> function, which has the following arguments:</p>
<ul>
<li><code>data</code></li>
<li><code>nrow</code></li>
<li><code>ncol</code></li>
<li><code>byrow</code></li>
<li><code>dimnames</code></li>
</ul>
<p>The <code>data</code> argument is required and is typically a vector (atomic or not). If <code>nrow</code> and <code>ncol</code> are not provided, <code>data</code> is made into a one-column matrix. If only one of <code>nrow</code> and <code>ncol</code> are provided, then the other is calculated as <code>length(data)</code> divided by the given. If the result is not an integer, the result is rounded, a warning message is issued, and recycling rules are invoked (see next chapter) to fill the matrix.</p>
<p>The arguments <code>nrow</code> and <code>ncol</code> define the matrix dimensions. By default, values of <code>data</code> fill the matrix column-wise. That is, columns are filled top-down before the next column is filled. For example,</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">matrix</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">9</span>, <span class="dt">ncol =</span> <span class="dv">3</span>)
<span class="co">#&gt;      [,1] [,2] [,3]</span>
<span class="co">#&gt; [1,]    1    4    7</span>
<span class="co">#&gt; [2,]    2    5    8</span>
<span class="co">#&gt; [3,]    3    6    9</span></code></pre></div>
<p>The number of rows (<code>nrow</code>) was determined by the length of <code>1:9</code> being divided by <code>ncol</code>. The vector <code>1:9</code> then filled the <span class="math inline">\(3 \times 3\)</span> matrix by column. Filling by column is the default behavior of <code>matrix</code> because <code>byrow = FALSE</code> by default. Using <code>byrow = TRUE</code> fills by row.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">matrix</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">9</span>, <span class="dt">ncol =</span> <span class="dv">3</span>, <span class="dt">byrow =</span> <span class="ot">TRUE</span>)
<span class="co">#&gt;      [,1] [,2] [,3]</span>
<span class="co">#&gt; [1,]    1    2    3</span>
<span class="co">#&gt; [2,]    4    5    6</span>
<span class="co">#&gt; [3,]    7    8    9</span></code></pre></div>
<p>A consequence of <code>c</code> is that dimensions (and all other attributes except names) are removed from the arguments. Thus, using <code>c</code> on a matrix can be used to transform the matrix into a vector. The resulting vector from <code>c</code> on a matrix is assembled by column. There is no optional argument of <code>c</code> such that the vector is assembled by row.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">9</span>, <span class="dt">ncol =</span> <span class="dv">3</span>)
<span class="kw">c</span>(x)
<span class="co">#&gt; [1] 1 2 3 4 5 6 7 8 9</span>

y &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">9</span>, <span class="dt">ncol =</span> <span class="dv">3</span>, <span class="dt">byrow =</span> <span class="ot">TRUE</span>)
<span class="kw">c</span>(y)
<span class="co">#&gt; [1] 1 4 7 2 5 8 3 6 9</span></code></pre></div>
<p>We can see how a matrix has both a <code>dim</code> attribute and a <code>class</code>, which should not be confused with the matrix’s data type.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">9</span>, <span class="dt">ncol =</span> <span class="dv">3</span>)
<span class="kw">attributes</span>(x)
<span class="co">#&gt; $dim</span>
<span class="co">#&gt; [1] 3 3</span>

<span class="kw">class</span>(x)
<span class="co">#&gt; [1] &quot;matrix&quot;</span>

<span class="kw">typeof</span>(x)
<span class="co">#&gt; [1] &quot;integer&quot;</span></code></pre></div>
</div>
<div id="dimensions-and-length-incomplete" class="section level3">
<h3><span class="header-section-number">3.3.2</span> Dimensions and length [INCOMPLETE]</h3>
</div>
<div id="dimnames-and-names-incomplete" class="section level3">
<h3><span class="header-section-number">3.3.3</span> Dimnames and names [INCOMPLETE]</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">4</span>, <span class="dt">nrow =</span> <span class="dv">2</span>, <span class="dt">dimnames =</span> <span class="kw">list</span>(<span class="kw">c</span>(<span class="st">&quot;r1&quot;</span>, <span class="st">&quot;r2&quot;</span>), <span class="kw">c</span>(<span class="st">&quot;c1&quot;</span>, <span class="st">&quot;c2&quot;</span>)))
<span class="kw">print</span>(x)
<span class="co">#&gt;    c1 c2</span>
<span class="co">#&gt; r1  1  3</span>
<span class="co">#&gt; r2  2  4</span>

y &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">4</span>, <span class="dt">nrow =</span> <span class="dv">2</span>)
<span class="kw">rownames</span>(y) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;r1&quot;</span>, <span class="st">&quot;r2&quot;</span>)
<span class="kw">colnames</span>(y) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;c1&quot;</span>, <span class="st">&quot;c2&quot;</span>)
<span class="kw">print</span>(y)
<span class="co">#&gt;    c1 c2</span>
<span class="co">#&gt; r1  1  3</span>
<span class="co">#&gt; r2  2  4</span>

z &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">4</span>, <span class="dt">nrow =</span> <span class="dv">2</span>, <span class="dt">dimnames =</span> <span class="kw">list</span>(<span class="ot">NULL</span>, <span class="kw">c</span>(<span class="st">&quot;c1&quot;</span>, <span class="st">&quot;c2&quot;</span>)))
<span class="kw">print</span>(z)
<span class="co">#&gt;      c1 c2</span>
<span class="co">#&gt; [1,]  1  3</span>
<span class="co">#&gt; [2,]  2  4</span></code></pre></div>
</div>
<div id="matrix-binding" class="section level3">
<h3><span class="header-section-number">3.3.4</span> Matrix binding</h3>
<p>Because <code>c</code> removes the dimensions attribute, it cannot be used to concatenate matrices. Furthermore, <code>c</code> does not specify the dimensions along which the concatenation is supposed to occur. To concatenate two or more matrices together, the <code>cbind</code> and <code>rbind</code> functions are used. <code>cbind</code> is used to bind columns while <code>rbind</code> is used to bind rows. Arguments of <code>cbind</code> must have the same number of rows while arguments of <code>rbind</code> have the same number of columns.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">4</span>, <span class="dt">nrow =</span> <span class="dv">2</span>)
y &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="dv">5</span><span class="op">:</span><span class="dv">8</span>, <span class="dt">nrow =</span> <span class="dv">2</span>)

<span class="kw">cbind</span>(x, y)
<span class="co">#&gt;      [,1] [,2] [,3] [,4]</span>
<span class="co">#&gt; [1,]    1    3    5    7</span>
<span class="co">#&gt; [2,]    2    4    6    8</span>

<span class="kw">rbind</span>(x, y)
<span class="co">#&gt;      [,1] [,2]</span>
<span class="co">#&gt; [1,]    1    3</span>
<span class="co">#&gt; [2,]    2    4</span>
<span class="co">#&gt; [3,]    5    7</span>
<span class="co">#&gt; [4,]    6    8</span></code></pre></div>
<p>If the arguments are vectors, the binding function will automatically turn the vectors into matrices. <code>cbind</code> turns vectors into one-column matrices while <code>rbind</code> turns vectors into one-row matrices. Binding will also use argument or object names as dimension names for the vector.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> </span>y &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">3</span>

<span class="kw">cbind</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>)
<span class="co">#&gt;      [,1]</span>
<span class="co">#&gt; [1,]    1</span>
<span class="co">#&gt; [2,]    2</span>
<span class="co">#&gt; [3,]    3</span>

<span class="kw">rbind</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>)
<span class="co">#&gt;      [,1] [,2] [,3]</span>
<span class="co">#&gt; [1,]    1    2    3</span>

<span class="kw">cbind</span>(x, y)
<span class="co">#&gt;      x y</span>
<span class="co">#&gt; [1,] 1 1</span>
<span class="co">#&gt; [2,] 2 2</span>
<span class="co">#&gt; [3,] 3 3</span>

<span class="kw">cbind</span>(<span class="dt">x =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">3</span>, <span class="dt">y =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">3</span>)
<span class="co">#&gt;      x y</span>
<span class="co">#&gt; [1,] 1 1</span>
<span class="co">#&gt; [2,] 2 2</span>
<span class="co">#&gt; [3,] 3 3</span>

z &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">6</span>, <span class="dt">nrow =</span> <span class="dv">3</span>, <span class="dt">dimnames =</span> <span class="kw">list</span>(<span class="ot">NULL</span>, <span class="kw">c</span>(<span class="st">&quot;z1&quot;</span>, <span class="st">&quot;z2&quot;</span>)))
<span class="kw">cbind</span>(z, <span class="dt">x =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">3</span>)
<span class="co">#&gt;      z1 z2 x</span>
<span class="co">#&gt; [1,]  1  4 1</span>
<span class="co">#&gt; [2,]  2  5 2</span>
<span class="co">#&gt; [3,]  3  6 3</span></code></pre></div>
</div>
<div id="matrix-coercion" class="section level3">
<h3><span class="header-section-number">3.3.5</span> Matrix coercion</h3>
<p>The implicit coercion hiearchy applies to matrices.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">4</span>, <span class="dt">ncol =</span> <span class="dv">2</span>)
<span class="kw">typeof</span>(x)
<span class="co">#&gt; [1] &quot;integer&quot;</span>

y &lt;-<span class="st"> </span>x <span class="op">*</span><span class="st"> </span>.<span class="dv">5</span>
<span class="kw">typeof</span>(y)
<span class="co">#&gt; [1] &quot;double&quot;</span>

lettered_mat &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="kw">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>, <span class="st">&quot;d&quot;</span>), <span class="dt">ncol =</span> <span class="dv">2</span>)
z &lt;-<span class="st"> </span><span class="kw">cbind</span>(x, lettered_mat)
<span class="kw">print</span>(z)
<span class="co">#&gt;      [,1] [,2] [,3] [,4]</span>
<span class="co">#&gt; [1,] &quot;1&quot;  &quot;3&quot;  &quot;a&quot;  &quot;c&quot; </span>
<span class="co">#&gt; [2,] &quot;2&quot;  &quot;4&quot;  &quot;b&quot;  &quot;d&quot;</span>

<span class="kw">typeof</span>(z)
<span class="co">#&gt; [1] &quot;character&quot;</span></code></pre></div>
<p>Using explicit coercion functions (i.e. <code>as.###</code>) will remove the dimensions attribute from the matrix, creating a vector. Using <code>mode&lt;-</code>, however, will maintain dimensions because <code>mode&lt;-</code> only changes the data type, leaving the dimension attribute untouched.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">4</span>, <span class="dt">ncol =</span> <span class="dv">2</span>)
<span class="kw">as.character</span>(x)
<span class="co">#&gt; [1] &quot;1&quot; &quot;2&quot; &quot;3&quot; &quot;4&quot;</span>

<span class="kw">mode</span>(x) &lt;-<span class="st"> &quot;character&quot;</span>
<span class="kw">print</span>(x)
<span class="co">#&gt;      [,1] [,2]</span>
<span class="co">#&gt; [1,] &quot;1&quot;  &quot;3&quot; </span>
<span class="co">#&gt; [2,] &quot;2&quot;  &quot;4&quot;</span></code></pre></div>
</div>
<div id="matrix-operations" class="section level3">
<h3><span class="header-section-number">3.3.6</span> Matrix operations</h3>
<p><code>*</code> does not invoke matrix multiplication. This is sensible because <code>*</code> is a vectorized operator; matrix elements are multiplied together as if their underlying vectors were cross-multiplied. For matrix multiplication, the operator <code>%*%</code> is used instead.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">9</span>, <span class="dt">nrow =</span> <span class="dv">3</span>)
y &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="dv">9</span><span class="op">:</span><span class="dv">1</span>, <span class="dt">nrow =</span> <span class="dv">3</span>)

x <span class="op">*</span><span class="st"> </span>y
<span class="co">#&gt;      [,1] [,2] [,3]</span>
<span class="co">#&gt; [1,]    9   24   21</span>
<span class="co">#&gt; [2,]   16   25   16</span>
<span class="co">#&gt; [3,]   21   24    9</span>

x <span class="op">%*%</span><span class="st"> </span>y
<span class="co">#&gt;      [,1] [,2] [,3]</span>
<span class="co">#&gt; [1,]   90   54   18</span>
<span class="co">#&gt; [2,]  114   69   24</span>
<span class="co">#&gt; [3,]  138   84   30</span></code></pre></div>
<p>Other useful functions related to matrices.</p>
<table>
<colgroup>
<col width="15%" />
<col width="84%" />
</colgroup>
<thead>
<tr class="header">
<th>function</th>
<th>description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>var</code>, <code>cov</code></td>
<td>Compute the covariance matrix of some input matrix</td>
</tr>
<tr class="even">
<td><code>t</code></td>
<td>transpose</td>
</tr>
<tr class="odd">
<td><code>solve</code></td>
<td>inverse of a square matrix. Can also solve a system of linear equations if a second argument is provided</td>
</tr>
<tr class="even">
<td><code>det</code></td>
<td>find determinant of a matrix</td>
</tr>
<tr class="odd">
<td><code>eigen</code></td>
<td>find eigenvalues and eigenvectors of a matrix</td>
</tr>
<tr class="even">
<td><code>chol</code></td>
<td>performs a Cholesky decomposition on a matrix - useful for multivariate data generation</td>
</tr>
</tbody>
</table>
<p><code>diag</code> is another matrix-related though frustrating function because its behavior and results change depending on the input. The table below describes the different results of some object <code>x</code>.</p>
<table style="width:83%;">
<colgroup>
<col width="38%" />
<col width="44%" />
</colgroup>
<thead>
<tr class="header">
<th>Input</th>
<th>Output</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>x</code> is numeric and length 1</td>
<td>An <span class="math inline">\(x\times x\)</span> identity matrix</td>
</tr>
<tr class="even">
<td><code>x</code> is numeric and length = <span class="math inline">\(y&gt;1\)</span></td>
<td>A <span class="math inline">\(y\times y\)</span> matrix with diagonal elements equal to <code>x</code> and off-diagonals equal to 0.</td>
</tr>
<tr class="odd">
<td><code>x</code> is a square matrix</td>
<td>Atomic vector whose elements are the diagonals of <code>x</code></td>
</tr>
</tbody>
</table>
<p>For example,</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">diag</span>(<span class="dv">3</span>)
<span class="co">#&gt;      [,1] [,2] [,3]</span>
<span class="co">#&gt; [1,]    1    0    0</span>
<span class="co">#&gt; [2,]    0    1    0</span>
<span class="co">#&gt; [3,]    0    0    1</span>

<span class="kw">diag</span>(<span class="dv">4</span><span class="op">:</span><span class="dv">6</span>)
<span class="co">#&gt;      [,1] [,2] [,3]</span>
<span class="co">#&gt; [1,]    4    0    0</span>
<span class="co">#&gt; [2,]    0    5    0</span>
<span class="co">#&gt; [3,]    0    0    6</span>

<span class="kw">diag</span>(<span class="kw">matrix</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">9</span>, <span class="dt">nrow =</span> <span class="dv">3</span>))
<span class="co">#&gt; [1] 1 5 9</span></code></pre></div>
<p><code>diag&lt;-</code> can also be used to overwrite the diagonal of a matrix.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> </span><span class="kw">matrix</span>(.<span class="dv">5</span>, <span class="dt">nrow =</span> <span class="dv">3</span>, <span class="dt">ncol =</span> <span class="dv">3</span>)
x
<span class="co">#&gt;      [,1] [,2] [,3]</span>
<span class="co">#&gt; [1,]  0.5  0.5  0.5</span>
<span class="co">#&gt; [2,]  0.5  0.5  0.5</span>
<span class="co">#&gt; [3,]  0.5  0.5  0.5</span>

<span class="kw">diag</span>(x) &lt;-<span class="st"> </span><span class="kw">rep</span>(<span class="dv">1</span>, <span class="dv">3</span>)
x
<span class="co">#&gt;      [,1] [,2] [,3]</span>
<span class="co">#&gt; [1,]  1.0  0.5  0.5</span>
<span class="co">#&gt; [2,]  0.5  1.0  0.5</span>
<span class="co">#&gt; [3,]  0.5  0.5  1.0</span></code></pre></div>
<p>Occassionally, we must find sums/means of rows or sums/means of columns of a matrix. The <code>mean()</code> and <code>sum()</code> functions will not work because they ignore the dimensions and matrix class of their input; they only work on atomic vectors. Though looping procedures can accomplish these row and column operations, fast efficient functions exist for these tasks.</p>
<ul>
<li><code>rowSums</code></li>
<li><code>rowMeans</code></li>
<li><code>colSums</code></li>
<li><code>colMeans</code></li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">9</span>, <span class="dt">nrow =</span> <span class="dv">3</span>)

<span class="kw">rowSums</span>(x)
<span class="co">#&gt; [1] 12 15 18</span>

<span class="kw">rowMeans</span>(x)
<span class="co">#&gt; [1] 4 5 6</span>

<span class="kw">colSums</span>(x)
<span class="co">#&gt; [1]  6 15 24</span>

<span class="kw">colMeans</span>(x)
<span class="co">#&gt; [1] 2 5 8</span></code></pre></div>
</div>
</div>
<div id="exercises-1" class="section level2">
<h2><span class="header-section-number">3.4</span> Exercises</h2>
<ol style="list-style-type: decimal">
<li>What will be the data type of the following vectors? Why?
<ol style="list-style-type: lower-alpha">
<li><code>c(0, 4, &quot;2&quot;)</code></li>
<li><code>c(1:4, NA_real_)</code></li>
<li><code>c(1:4, NA)</code></li>
<li><code>-7:1 * 2L</code></li>
<li><code>-7:1 * 2</code></li>
</ol></li>
<li><p>Consider the following code block.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> &quot;First line here.</span>
<span class="st">  Second line here.&quot;</span>

<span class="kw">cat</span>(x)
<span class="co">#&gt; First line here.</span>
<span class="co">#&gt;   Second line here.</span></code></pre></div>
<p>The author intended the “Second line here” to be printed with no indentation. Why was indentation produced?</p></li>
<li><p>Using the followving vectors,</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">a &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">8</span>, <span class="dv">9</span>)
b &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">7</span>, <span class="dv">5</span>, <span class="dv">6</span>)
c &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">3</span>, <span class="dv">9</span>, <span class="dv">1</span>, <span class="dv">2</span>)</code></pre></div>
create a <span class="math inline">\(4\times 3\)</span> matrix in two ways. Include column names without the use of <code>colnames()</code>
<ol style="list-style-type: lower-alpha">
<li>with <code>c()</code> and <code>matrix()</code></li>
<li>with <code>cbind()</code></li>
</ol></li>
<li><p>The creation of <code>x</code> in the following codeblock is tedious.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> </span><span class="kw">c</span>(
  <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>,
  <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">2</span>,
  <span class="dv">3</span>, <span class="dv">3</span>, <span class="dv">3</span>, <span class="dv">3</span>,
  <span class="dv">4</span>, <span class="dv">4</span>, <span class="dv">4</span>, <span class="dv">4</span>,
  <span class="dv">5</span>, <span class="dv">5</span>, <span class="dv">5</span>, <span class="dv">5</span>
)
x &lt;-<span class="st"> </span><span class="kw">matrix</span>(x, <span class="dt">nrow =</span> <span class="dv">5</span>, <span class="dt">byrow =</span> <span class="ot">TRUE</span>)</code></pre></div>
Recreate <code>x</code> using sequences, <code>rep()</code>, and two different approaches:
<ol style="list-style-type: lower-alpha">
<li>with <code>byrow = FALSE</code></li>
<li>with <code>byrow = TRUE</code></li>
</ol>
<p>Each approach should be written with only one line of code.</p></li>
<li><p>Given <code>x &lt;- c(&quot;300 mg&quot;, &quot;500 mg&quot;, &quot;200 mg&quot;)</code>, create a factor such that the values will sort in “descending” order. Include 100 and 400 mg as possible levels.</p></li>
<li><p>Given <code>x</code>, use vectorized operations to determine which elements of <code>x</code> are less than or equal to 95 and greater than or equal to 75. The result should be a logical vector.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> </span><span class="kw">c</span>(
  <span class="dv">82</span>, <span class="dv">82</span>, <span class="dv">94</span>, <span class="dv">67</span>, <span class="dv">79</span>, 
  <span class="dv">68</span>, <span class="dv">74</span>, <span class="dv">103</span>, <span class="dv">61</span>, <span class="dv">70</span>, 
  <span class="dv">74</span>, <span class="dv">70</span>, <span class="dv">69</span>, <span class="dv">63</span>, <span class="dv">70</span>
)</code></pre></div></li>
<li><p>In the following code block, a user wanted to create a logical vector specifying which elements were equal to one or two. The results are not what the user intended. What is the mistake and what caused it? How would you correct the mistake? (Note: there are at least three ways)</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">3</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">0</span>)
x <span class="op">==</span><span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>)
<span class="co">#&gt;  [1]  TRUE  TRUE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE</span></code></pre></div></li>
<li><p>A user has a matrix <code>x</code> defined below. The user intended to multiply the first column by three and the second column by two. The results are not what the user intended.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">6</span>, <span class="dt">ncol =</span> <span class="dv">2</span>)
x
<span class="co">#&gt;      [,1] [,2]</span>
<span class="co">#&gt; [1,]    1    4</span>
<span class="co">#&gt; [2,]    2    5</span>
<span class="co">#&gt; [3,]    3    6</span>

x <span class="op">*</span><span class="st"> </span><span class="kw">c</span>(<span class="dv">3</span>, <span class="dv">2</span>)
<span class="co">#&gt;      [,1] [,2]</span>
<span class="co">#&gt; [1,]    3    8</span>
<span class="co">#&gt; [2,]    4   15</span>
<span class="co">#&gt; [3,]    9   12</span></code></pre></div>
What is the mistake and what caused it? Correct the mistake using three approaches:
<ol style="list-style-type: lower-alpha">
<li>Using <code>t()</code> without <code>rep()</code></li>
<li>Using <code>rep()</code> without <code>t()</code></li>
<li>Using <code>%*%</code></li>
</ol></li>
</ol>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="r-essentials-intro.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="indexing.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "";
    if (src === "" || src === "true") src = "https://cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
